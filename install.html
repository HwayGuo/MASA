<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>MASA-0.44.0: Installation/Linkage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MASA-0.44.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">The MASA Library</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Installation/Linkage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>libMASA uses the GNU autotools suite (autoconf, automake, and libtool) for its development build system. This system is popular among the Linux development community and provides a familiar build environment for end users.</p>
<p>To build libMASA starting from a release distribution, untar the distribution and enter the top-level directory.</p>
<div class="fragment"><pre class="fragment">
<blockquote class="doxtable">
<p>
tar xvfz masa-0.44.0.tar.gz
cd masa-0.44.0/</p>
<p></p>
</blockquote>

</pre></div><h2>Configuration Requirements</h2>
<p>Since libMASA provides a Fortran interface, a valid Fortran90 compiler is also required. To date, libMASA has been successfully tested with <em>gfortran</em> and the Intel <em>ifort</em> compilers. The configuration step will look for available compilers in the user environment but as with any <em>autoconf</em> based configuration, these can be overridden with command line arguments (by setting <code>CXX</code>, <code>FC</code>, and <code>F77</code> appropriately).</p>
<p><b>Installation Directory</b>: Use the <code>&ndash;prefix</code> option to specify your desired top-level installation directory for MASA. The examples below all configure libMASA to be installed in the user's ~/bin/masa directory.</p>
<p>Once configured, issue a <code>make</code> to build the software. If successful, this will build the libMASA library (static and dynamic versions) and several examples.</p>
<div class="fragment"><div class="line">&gt; make </div>
</div><!-- fragment --><p><b> Verifying the build:</b> To verify that the software is working properly, a test option is provided to run a short suite of functionality tests against the local build. To run, issue a <code>make check</code> to run the tests. If successful, output similar to the following will be generated.</p>
<div class="fragment"><div class="line"> &gt; make check</div>
<div class="line"></div>
<div class="line">-------------------------------------------------------</div>
<div class="line">Initializing MASA Tests</div>
<div class="line">-------------------------------------------------------</div>
<div class="line">PASS: init.sh</div>
<div class="line">PASS: misc</div>
<div class="line">PASS: fail_cond</div>
<div class="line">PASS: catch_exception</div>
<div class="line">PASS: <span class="keyword">register</span></div>
<div class="line">PASS: poly</div>
<div class="line">PASS: uninit</div>
<div class="line">PASS: pass_func</div>
<div class="line">PASS: purge</div>
<div class="line">PASS: heat_const_steady</div>
<div class="line">PASS: heat_var_steady</div>
<div class="line">PASS: heat_const_unsteady</div>
<div class="line">PASS: heat_var_unsteady</div>
<div class="line">PASS: euler1d</div>
<div class="line">PASS: euler2d</div>
<div class="line">PASS: euler3d</div>
<div class="line">PASS: euler_transient_1d</div>
<div class="line">PASS: euler_chem_1d</div>
<div class="line">PASS: ns2d</div>
<div class="line">PASS: ns3d</div>
<div class="line">PASS: ns3d_phys</div>
<div class="line">PASS: n2d3d</div>
<div class="line">PASS: axi_euler</div>
<div class="line">PASS: axi_cns</div>
<div class="line">PASS: rans_sa</div>
<div class="line">PASS: sod</div>
<div class="line"> </div>
<div class="line">-------------------------------------------------------</div>
<div class="line">Initializing CMASA Tests</div>
<div class="line">-------------------------------------------------------</div>
<div class="line">PASS: c_init.sh</div>
<div class="line">PASS: c_misc</div>
<div class="line">PASS: c_purge</div>
<div class="line">PASS: c_heat1dsc</div>
<div class="line">PASS: c_heat2dsc</div>
<div class="line">PASS: c_heat3dsc</div>
<div class="line">PASS: c_euler1d</div>
<div class="line">PASS: c_euler2d</div>
<div class="line">PASS: c_euler3d</div>
<div class="line">PASS: c_euler_chem_1d</div>
<div class="line">PASS: c_navierstokes2d</div>
<div class="line">PASS: c_navierstokes3d</div>
<div class="line"> </div>
<div class="line">-------------------------------------------------------</div>
<div class="line">Initializing FortMASA Tests</div>
<div class="line">-------------------------------------------------------</div>
<div class="line">PASS: f_init.sh</div>
<div class="line">MASA :: selected mytest</div>
<div class="line">PASS: f_misc</div>
<div class="line">PASS: f_purge</div>
<div class="line">PASS: f_heat</div>
<div class="line">PASS: f_euler1d</div>
<div class="line">PASS: f_euler2d</div>
<div class="line">PASS: f_euler3d</div>
<div class="line">PASS: f_euler_chem_1d</div>
<div class="line">PASS: f_cns2d</div>
<div class="line">PASS: f_cns3d</div>
<div class="line"> </div>
<div class="line">-------------------------------------------------------</div>
<div class="line">Initializing MASA Examples Tests</div>
<div class="line">-------------------------------------------------------</div>
<div class="line">PASS: example_test.sh</div>
<div class="line"></div>
<div class="line">-------------------------------------------------------</div>
<div class="line">Finalizing MASA Tests, have a well verified day</div>
<div class="line">-------------------------------------------------------</div>
<div class="line">PASS: finalize.sh</div>
<div class="line">===================</div>
<div class="line">All 50 tests passed</div>
<div class="line">===================</div>
</div><!-- fragment --><h2>Installation </h2>
<p>After the build is complete, issue a <code>make install</code> to install the library. The installation will consist of three top-level directories housing the library, include files, and example files. An example of the top-level directories after installation is shown below:</p>
<div class="fragment"><div class="line">&gt; make install </div>
</div><!-- fragment --><p>Top-level libMASA installation directory:</p>
<div class="fragment"><div class="line">&gt; ls $HOME/bin/<a class="code" href="classmasa.html">masa</a>/</div>
<div class="line">examples/  include/  lib/</div>
</div><!-- fragment --><h2>Library Linkage</h2>
<p>To link an external C/C++ or Fortran application with the library, the <code>include</code> directory must be added to the compilers include search path in order to access the <a class="el" href="masa_8h.html">masa.h</a> header file (or for Fortran, the <code>lib</code> directory should be added to access the pre-compiled masa F90 module). The <code>lib</code> directory should also be added to the linker search path along with a request to link against the libMASA library. Several example link steps are provided below. These examples assume that the libMASA library has been successfully built and installed previously in the users's ~/bin/masa directory:</p>
<h3>C/C++ Example</h3>
<div class="fragment"><div class="line">&gt; $(CC) -I$HOME/bin/<a class="code" href="classmasa.html">masa</a>/include app.c -L$HOME/bin/<a class="code" href="classmasa.html">masa</a>/lib -lmasa </div>
</div><!-- fragment --><p>If you set your <code>PKG_CONFIG_PATH</code> environment variable to contain <code>$HOME/lib/pkgconfig</code> you can use &lt;ahref="http://pkg-config.freedesktop.org/wiki/"&gt;<code>pkg-config</code> to lookup the relevant linking information automatically:</p>
<div class="fragment"><div class="line">&gt; $(CC) `pkg-config --cflags <a class="code" href="classmasa.html">masa</a>` app.c `pkg-config --libs <a class="code" href="classmasa.html">masa</a>` </div>
</div><!-- fragment --><h3>Fortran Example</h3>
<p>Fortran applications also require linking against the fmasa library:</p>
<div class="fragment"><div class="line">&gt; $(FC) -I$HOME/bin/<a class="code" href="classmasa.html">masa</a>/lib app.f90 -L$HOME/bin/<a class="code" href="classmasa.html">masa</a>/lib -lfmasa -lmasa </div>
</div><!-- fragment --><p>As with C/C++, users can use make use of pkg-config:</p>
<div class="fragment"><div class="line">&gt; $(FC) `pkg-config --variable=fflags <a class="code" href="classmasa.html">masa</a>` app.f90 `pkg-config --variable=flibs <a class="code" href="classmasa.html">masa</a>` </div>
</div><!-- fragment --><p>To embed the dynamic library search path for the libMASA library directly into the application executable, use an additional linker option as follows:</p>
<h3>C/C++ Example</h3>
<div class="fragment"><div class="line">&gt; $(CC) -I$HOME/bin/<a class="code" href="classmasa.html">masa</a>/include app.c -L$HOME/bin/<a class="code" href="classmasa.html">masa</a>/lib \</div>
<div class="line">        -Wl,-rpath,$HOME/bin/<a class="code" href="classmasa.html">masa</a>/lib -lmasa </div>
</div><!-- fragment --><p><b>Important Note:</b> F90 module file formats are not consistent across multiple compilers. Therefore, a Fortran application and the libMASA F90 interface <em>must</em> be built with the same Fortran compiler family to ensure compatibility. </p>
</div></div><!-- contents -->
<hr size="1"/><address style="text-align: right;"><small>
Generated on Tue Apr 21 2015 10:22:49 for MASA-0.44.0
by&nbsp;<a href="http://www.doxygen.org/index.html">
<em>doxygen</em></a>
1.8.5</small></address>
</body>
</html>
