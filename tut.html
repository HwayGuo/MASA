<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>MASA-0.44.0: Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MASA-0.44.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The following sections detail all available manufactured solutions in MASA.</p>
<p>This chapter will introduce the user to the basics of the MASA library. This chapter assumes the user has already built and linked the MASA library into their codebase. Now, you desire to access the magic of MASA and begin the process of verification of your codebase.</p>
<p>This tutorial will detail the essential subroutines for any MASA program. The c++ MASA bindings are used throughout, but a tutorial using the Fotran90 or C-code would be essentially unchanged.</p>
<h1>Initalizing </h1>
<p>To begin, any MASA program will call <code>masa_init</code>. This routine initalizes a manufactured solution class of some particular type. It requires two inputs: the manufactured solution class name as well as a unique name for this solution.</p>
<p>Thus, to initalize a one dimensional euler equation manufactured solution with the unique name of 'nick', the function call would look something like:</p>
<div class="fragment"><div class="line"><a class="code" href="masa_8h.html#a64694fa62a5fd02c5bc3a3bbe184369d">masa_init</a>(<span class="stringliteral">&quot;nick&quot;</span>,<span class="stringliteral">&quot;euler_1d&quot;</span>);  </div>
</div><!-- fragment --><p>The unique name allows you to initalize several manufactured solutions of the same problem type, should you so desire. This can be useful if you want to access several manufactured solutions of the same type with different parameter sets. You cannot, of course, specify several manufactured solutions with the same unique name!</p>
<p>Please be careful when specifying the second string: this <em>must</em> match the unique identifier for that masa solution. Failing to match here will likely result in MASA aborting.</p>
<p>A logical question to ask at this juncture is where can you find a list of the available manufactured solutions? The available solutions can be found several ways:</p>
<ul>
<li>
Browsing the available manufactured solutions page of this documentation </li>
<li>
Running the display_solutions executable in your examples directory </li>
<li>
Browsing through the solutions interactively using MASAshell (also in the examples dir) </li>
<li>
Calling the function: <code>masa_printid()</code> </li>
</ul>
<h2>Setting up the Solution </h2>
<p>Having initalized the solution, you need to set the variables to some reasonable value. This will depend on your particular problem, but let's continue with the 1d euler example.</p>
<p>Firstly, let's determine <em>what</em> variables need to be set. A list of variables for your solution can be found by:</p>
<ul>
<li>
Browsing the particular manufactured solution's page in this documentation </li>
<li>
Selecting the solution and then displaying the variables interactively using MASAshell </li>
<li>
Calling the function: <code><a class="el" href="masa_8h.html#a14cb99f9d8291a27c7c61612a4f02a95">masa_display_param()</a></code> </li>
</ul>
<p>The output from <a class="el" href="masa_8h.html#a14cb99f9d8291a27c7c61612a4f02a95">masa_display_param()</a> for our euler1d example will look something like: </p>
<div class="fragment"><div class="line">MASA :: Solution has 14 variables.</div>
<div class="line">*-------------------------------------*</div>
<div class="line">Gamma is set to: Uninitialized</div>
<div class="line">L is set to: Uninitialized</div>
<div class="line">R is set to: Uninitialized</div>
<div class="line">a_px is set to: Uninitialized</div>
<div class="line">a_rhox is set to: Uninitialized</div>
<div class="line">a_ux is set to: Uninitialized</div>
<div class="line">k is set to: Uninitialized</div>
<div class="line">mu is set to: Uninitialized</div>
<div class="line">p_0 is set to: Uninitialized</div>
<div class="line">p_x is set to: Uninitialized</div>
<div class="line">rho_0 is set to: Uninitialized</div>
<div class="line">rho_x is set to: Uninitialized</div>
<div class="line">u_0 is set to: Uninitialized</div>
<div class="line">u_x is set to: Uninitialized</div>
<div class="line">*-------------------------------------*</div>
</div><!-- fragment --><p>Thus, euler_1d has 14 variables, all of which should be set to something. We can set a value of a parameter in MASA using the function, <code>masa_set_param</code>.</p>
<p><code>masa_set_param</code> takes as input a string and a double. The string specifies the parameter we are setting and the double will become the parameter's new value. This overwrites the any previous value the paramter may have had.</p>
<p>Continuing our example, let's set a_rhox to 33.33 (repeating, of course). In our code, this would look like:</p>
<div class="fragment"><div class="line"><a class="code" href="masa_8h.html#a8ddd535d7f68b3e393e3403aabbc0ead">masa_set_param</a>(<span class="stringliteral">&quot;a_rhox&quot;</span>,33.3333333333333)</div>
</div><!-- fragment --><p>Now, checking <code>masa_display_param</code>, we can see we have set the value of a_rhox:</p>
<div class="fragment"><div class="line">MASA :: Solution has 14 variables.</div>
<div class="line">*-------------------------------------*</div>
<div class="line">Gamma is set to: Uninitialized</div>
<div class="line">L is set to: Uninitialized</div>
<div class="line">R is set to: Uninitialized</div>
<div class="line">a_px is set to: Uninitialized</div>
<div class="line">a_rhox is set to: 33.3333333333333</div>
<div class="line">a_ux is set to: Uninitialized</div>
<div class="line">k is set to: Uninitialized</div>
<div class="line">mu is set to: Uninitialized</div>
<div class="line">p_0 is set to: Uninitialized</div>
<div class="line">p_x is set to: Uninitialized</div>
<div class="line">rho_0 is set to: Uninitialized</div>
<div class="line">rho_x is set to: Uninitialized</div>
<div class="line">u_0 is set to: Uninitialized</div>
<div class="line">u_x is set to: Uninitialized</div>
<div class="line">*-------------------------------------*</div>
</div><!-- fragment --><p>At this point, we could continue the same process for each remaining variable.</p>
<p>To save you the tedium of doing this, MASA has graciously provided default values for all manufactured solution classes. In general, the default values have been selected to provide reasonable test conditions for verification and whenever possible, defauls correspond to some simple physical constraints (such as not producing negative energy, or density, etc.).</p>
<p>A user can invoke these defaults using the routine: <code><a class="el" href="masa_8h.html#ab9c879caaac86065941794269383f92f">masa_init_param()</a></code>. For our euler1d problem, the defaults look like:</p>
<div class="fragment"><div class="line">MASA :: Solution has 14 variables.</div>
<div class="line">*-------------------------------------*</div>
<div class="line">Gamma is set to: 16.1</div>
<div class="line">L is set to: 3.02</div>
<div class="line">R is set to: 1.01</div>
<div class="line">a_px is set to: 6.151</div>
<div class="line">a_rhox is set to: 1.2</div>
<div class="line">a_ux is set to: 0.03</div>
<div class="line">k is set to: 1.38</div>
<div class="line">mu is set to: 0.091</div>
<div class="line">p_0 is set to: 0.1984</div>
<div class="line">p_x is set to: 3.151</div>
<div class="line">rho_0 is set to: 91.5</div>
<div class="line">rho_x is set to: 5.13</div>
<div class="line">u_0 is set to: 0.191</div>
<div class="line">u_x is set to: 1.63</div>
<div class="line">*-------------------------------------*</div>
</div><!-- fragment --><p>Note that setting the defaults <em>will</em> <em>overwrite</em> <em>all</em> <em>previously</em> <em>initalized</em> <em>values</em> for the masa parameters! So if you desire to alter the default values, call <code>masa_set_param</code> <em>after</em> <code>masa_init_param</code>.</p>
<p>Finally, you have initalized all the parameters and you are ready to move on ... Or are you? Are you certain you initalized every parameter? Do you really want to verify this by checking <code><a class="el" href="masa_8h.html#a14cb99f9d8291a27c7c61612a4f02a95">masa_display_param()</a></code>? Luckily, MASA provides an alternative. The subroutine <code><a class="el" href="masa_8h.html#afc2b3571dac35c4db9cb6e34a94fc04c">masa_sanity_check()</a></code> will check that every parameter has been set to <em>something</em>.</p>
<h2>Accessing the Source Terms </h2>
<p>Now, we need to access the correct source and manufactured solution terms. Let us again use our euler1d solution example. Consulting our MASA documentation, we can see that the available source terms are:</p>
<ul>
<li>
<a class="el" href="masa_8h.html#af9c7825008c37a039ab2292a438b3140">masa_eval_1d_source_rho_u()</a> </li>
<li>
<a class="el" href="masa_8h.html#adfd2f2ccb69dae72271e62d2b8a5e746">masa_eval_1d_source_rho_e()</a> </li>
<li>
<a class="el" href="masa_8h.html#a3a177955ae14f9b670b7386c00bd7292">masa_eval_1d_source_rho()</a> </li>
<li>
<a class="el" href="masa_8h.html#a792b68a29b597fd221b34e183e23c3d9">masa_eval_1d_exact_u()</a> </li>
<li>
<a class="el" href="masa_8h.html#a437fa1898f46e77b9f17ed14e685629f">masa_eval_1d_exact_p()</a> </li>
<li>
<a class="el" href="masa_8h.html#ac525d6a92e5bf9a7e69a7f09b1b8bbfb">masa_eval_1d_exact_rho()</a> </li>
<li>
masa_eval_1d_exact_grad_u() </li>
<li>
masa_eval_1d_exact_grad_p() </li>
<li>
masa_eval_1d_exact_grad_rho() </li>
</ul>
<p>The first three functions (containing "source") are the source terms for the momentum, the energy and the density. The functions containing "_exact_" are the manufactured solutions. Finally, the "_grad_" are the gradients of the manufactured solutions, useful for setting boundary conditions.</p>
<p>In this case, the call pattern is simply: (x), e.g. masa_eval_1d_source_rho_u(x), where x is a Scalar value for the location on the mesh you are evaluating at. In general, the rule for MASA is that the spatial components go first, followed by the temporal component (if applicable). Thus, a 2d unsteady solution would take the form: "foo(x,y,t)". The spatial indicies are always in the order: x,y,z.</p>
<p>For further examples (including c-code and fortran), the user is directed to the examples directory included in the MASA distribution. </p>
</div></div><!-- contents -->
<hr size="1"/><address style="text-align: right;"><small>
Generated on Tue Apr 21 2015 10:22:49 for MASA-0.44.0
by&nbsp;<a href="http://www.doxygen.org/index.html">
<em>doxygen</em></a>
1.8.5</small></address>
</body>
</html>
